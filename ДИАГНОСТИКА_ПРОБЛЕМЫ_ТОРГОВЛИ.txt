ДИАГНОСТИКА ПРОБЛЕМЫ АВТОМАТИЧЕСКОГО ОТКЛЮЧЕНИЯ ТОРГОВЛИ
========================================================

ДАТА: 30 сентября 2025
ВРЕМЯ: 18:45

АНАЛИЗ ЛОГОВ:
------------
Из логов видно что:
1. ✅ Программа запускается корректно
2. ✅ Торговля по умолчанию ОТКЛЮЧЕНА (как и должно быть)
3. ✅ Пользователь ВКЛЮЧАЕТ торговлю через интерфейс
4. ❌ Торговля СНОВА отключается автоматически

НАЙДЕННАЯ ПРОБЛЕМА:
------------------
В логах видно сообщение:
"2025-09-30 17:57:55,768 - INFO - Останавливаем торговый поток перед закрытием приложения..."

Это означает что вызывается метод closeEvent() который останавливает торговлю!

ПРИЧИНА:
--------
Метод closeEvent() в строке 4584 вызывается когда:
1. Пользователь закрывает окно программы
2. Система завершает приложение
3. Происходит какое-то событие закрытия окна

В методе closeEvent() есть код:
```python
self.trading_worker.stop()  # Строка 4599
```

Который вызывает метод stop() в строке 1028:
```python
self.trading_enabled = False  # Отключает торговлю!
```

ВОЗМОЖНЫЕ ПРИЧИНЫ ВЫЗОВА closeEvent():
-------------------------------------
1. Пользователь случайно нажимает X на окне
2. Система автоматически закрывает окно
3. Ошибка в Qt которая вызывает closeEvent
4. Другое приложение посылает сигнал закрытия
5. Проблемы с фокусом окна

РЕШЕНИЕ:
--------
Нужно изменить логику в методе stop():
- НЕ отключать торговлю автоматически
- Отключать только self.running (остановка потока)
- Оставить trading_enabled без изменений

СТАТУС: ПРОБЛЕМА НАЙДЕНА ❌
Требуется исправление метода stop()