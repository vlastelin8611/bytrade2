#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞ —á–µ—Ä–µ–∑ API Bybit
"""

import sys
import os
import json

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –º–æ–¥—É–ª—è–º
sys.path.append(os.path.join(os.path.dirname(__file__), 'src'))

try:
    from api.bybit_client import BybitClient
    from config import API_KEY, API_SECRET, USE_TESTNET
except ImportError as e:
    print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {e}")
    sys.exit(1)

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    try:
        print("üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ API –∫–ª—é—á–µ–π...")
        api_key = API_KEY
        api_secret = API_SECRET
        testnet = USE_TESTNET
        print(f"‚úÖ API –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (testnet: {testnet})")
        
        print("üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è API –∫–ª–∏–µ–Ω—Ç–∞...")
        client = BybitClient(api_key, api_secret, testnet=testnet)
        print("‚úÖ API –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω")
        
        print("üîÑ –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞...")
        balance = client.get_wallet_balance()
        
        print("\n" + "="*50)
        print("üí∞ –ë–ê–õ–ê–ù–° –ö–û–®–ï–õ–¨–ö–ê")
        print("="*50)
        print(json.dumps(balance, indent=2, ensure_ascii=False))
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    main()